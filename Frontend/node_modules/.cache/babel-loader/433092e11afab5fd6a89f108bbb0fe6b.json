{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\franc\\\\Desktop\\\\Interest-Miner\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\franc\\\\Desktop\\\\Interest-Miner\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\franc\\\\Desktop\\\\Interest-Miner\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\franc\\\\Desktop\\\\Interest-Miner\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import Chart from\"react-apexcharts\";import{toast}from\"react-toastify\";import Loader from\"react-loader-spinner\";import RestAPI from\"services/api\";import{handleServerErrors}from\"utils/errorHandler\";var StreamChart=/*#__PURE__*/function(_React$Component){_inherits(StreamChart,_React$Component);var _super=_createSuper(StreamChart);function StreamChart(){var _this;_classCallCheck(this,StreamChart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={chartOptions:{twitterXaxis:{},paperXaxis:{},twitterSeries:[],paperSeries:[]},isLoding:true};_this.getChartOptions=function(data){var chartOptions={};var xAxisOptions=Object.keys(data);var seriesData=[];var keywords={};var keywordDataOverTime=Object.values(data);for(var index=0;index<keywordDataOverTime.length;index++){for(var itemIndex=0;itemIndex<keywordDataOverTime[index].length;itemIndex++){keywords[keywordDataOverTime[index][itemIndex][\"keyword__name\"]]=true;}}var _loop=function _loop(){var keywordName=_Object$keys[_i];var monthRank=[];for(var _index=0;_index<xAxisOptions.length;_index++){var searchedList=data[xAxisOptions[_index]].filter(function(item){return item[\"keyword__name\"]===keywordName;});monthRank.push(searchedList.length?searchedList[0].weight:0);}seriesData.push({name:keywordName,data:monthRank});};for(var _i=0,_Object$keys=Object.keys(keywords);_i<_Object$keys.length;_i++){_loop();}return{xAxis:xAxisOptions,series:seriesData};};return _this;}_createClass(StreamChart,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({isLoding:true},function(){RestAPI.streamChart().then(function(response){var twitterData=_this2.getChartOptions(response.data.twitter_data);var paperData=_this2.getChartOptions(response.data.paper_data);var chartOptions={twitterXaxis:twitterData.xAxis,twitterSeries:twitterData.series,paperXaxis:paperData.xAxis,paperSeries:paperData.series};_this2.setState({chartOptions,isLoding:false});}).catch(function(error){_this2.setState({isLoding:false});handleServerErrors(error,toast.error);});});}},{key:\"render\",value:function render(){var graphOptions={chart:{toolbar:{show:true,offsetX:0,offsetY:0,tools:{download:false,selection:true,zoom:false,zoomin:true,zoomout:true,pan:true,reset:false,customIcons:[]},autoSelected:\"zoom\"},type:\"area\",stacked:true},colors:[\"#1F85DE\",\"#D81FDE\",\"#DE1F85\",\"#DE781F\",\"#DE1F26\",\"#BFDE1F\",\"#6C0D5D\",\"#0D6C1C\",\"#25DE1F\",\"#3E1FDE\"],dataLabels:{enabled:false},stroke:{curve:\"smooth\",width:1},fill:{type:\"solid\"},xaxis:{}};var twitterGraphOptions=JSON.parse(JSON.stringify(graphOptions));twitterGraphOptions.xaxis.categories=this.state.chartOptions.twitterXaxis;var paperGraphOptions=JSON.parse(JSON.stringify(graphOptions));paperGraphOptions.xaxis.categories=this.state.chartOptions.paperXaxis;return/*#__PURE__*/React.createElement(\"div\",null,this.state.isLoding?/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\",style:{padding:\"20px\"}},/*#__PURE__*/React.createElement(Loader,{type:\"Puff\",color:\"#00BFFF\",height:100,width:100})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{align:\"center\"},\"Twitter Keyword Trends\"),/*#__PURE__*/React.createElement(\"div\",{id:\"chart\"},/*#__PURE__*/React.createElement(Chart,{type:\"area\",series:this.state.chartOptions.twitterSeries,options:twitterGraphOptions})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{align:\"center\"},\"Paper Keyword Trends\"),/*#__PURE__*/React.createElement(\"div\",{id:\"chart\"},/*#__PURE__*/React.createElement(Chart,{type:\"area\",series:this.state.chartOptions.paperSeries,options:paperGraphOptions,height:500}))));}}]);return StreamChart;}(React.Component);export default StreamChart;","map":{"version":3,"sources":["C:/Users/franc/Desktop/Interest-Miner/Frontend/src/components/Chart/StreamChart.js"],"names":["React","Chart","toast","Loader","RestAPI","handleServerErrors","StreamChart","state","chartOptions","twitterXaxis","paperXaxis","twitterSeries","paperSeries","isLoding","getChartOptions","data","xAxisOptions","Object","keys","seriesData","keywords","keywordDataOverTime","values","index","length","itemIndex","keywordName","monthRank","searchedList","filter","item","push","weight","name","xAxis","series","setState","streamChart","then","response","twitterData","twitter_data","paperData","paper_data","catch","error","graphOptions","chart","toolbar","show","offsetX","offsetY","tools","download","selection","zoom","zoomin","zoomout","pan","reset","customIcons","autoSelected","type","stacked","colors","dataLabels","enabled","stroke","curve","width","fill","xaxis","twitterGraphOptions","JSON","parse","stringify","categories","paperGraphOptions","padding","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Chart from \"react-apexcharts\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\nimport RestAPI from \"services/api\";\n\nimport { handleServerErrors } from \"utils/errorHandler\";\nclass StreamChart extends React.Component {\n  state = {\n    chartOptions: {\n      twitterXaxis: {},\n      paperXaxis: {},\n      twitterSeries: [],\n      paperSeries: [],\n    },\n    isLoding: true,\n  };\n\n  getChartOptions = (data) => {\n    let chartOptions = {};\n\n    let xAxisOptions = Object.keys(data);\n    let seriesData = [];\n    let keywords = {};\n\n    let keywordDataOverTime = Object.values(data);\n    for (let index = 0; index < keywordDataOverTime.length; index++) {\n      for (\n        let itemIndex = 0;\n        itemIndex < keywordDataOverTime[index].length;\n        itemIndex++\n      )\n        keywords[keywordDataOverTime[index][itemIndex][\"keyword__name\"]] = true;\n    }\n\n    for (let keywordName of Object.keys(keywords)) {\n      let monthRank = [];\n      for (let index = 0; index < xAxisOptions.length; index++) {\n        let searchedList = data[xAxisOptions[index]].filter(\n          (item) => item[\"keyword__name\"] === keywordName\n        );\n        monthRank.push(searchedList.length ? searchedList[0].weight : 0);\n      }\n      seriesData.push({\n        name: keywordName,\n        data: monthRank,\n      });\n    }\n    return { xAxis: xAxisOptions, series: seriesData };\n  };\n\n  componentDidMount() {\n    this.setState({ isLoding: true }, () => {\n      RestAPI.streamChart()\n        .then((response) => {\n          let twitterData = this.getChartOptions(response.data.twitter_data);\n          let paperData = this.getChartOptions(response.data.paper_data);\n\n          let chartOptions = {\n            twitterXaxis: twitterData.xAxis,\n            twitterSeries: twitterData.series,\n            paperXaxis: paperData.xAxis,\n            paperSeries: paperData.series,\n          };\n\n          this.setState({ chartOptions, isLoding: false });\n        })\n        .catch((error) => {\n          this.setState({ isLoding: false });\n          handleServerErrors(error, toast.error);\n        });\n    });\n  }\n\n  render() {\n    let graphOptions = {\n      chart: {\n        toolbar: {\n          show: true,\n          offsetX: 0,\n          offsetY: 0,\n          tools: {\n            download: false,\n            selection: true,\n            zoom: false,\n            zoomin: true,\n            zoomout: true,\n            pan: true,\n            reset: false,\n            customIcons: [],\n          },\n          autoSelected: \"zoom\",\n        },\n\n        type: \"area\",\n        stacked: true,\n      },\n      colors: [\n        \"#1F85DE\",\n        \"#D81FDE\",\n        \"#DE1F85\",\n        \"#DE781F\",\n        \"#DE1F26\",\n        \"#BFDE1F\",\n        \"#6C0D5D\",\n        \"#0D6C1C\",\n        \"#25DE1F\",\n        \"#3E1FDE\",\n      ],\n      dataLabels: { enabled: false },\n      stroke: {\n        curve: \"smooth\",\n        width: 1,\n      },\n      fill: { type: \"solid\" },\n      xaxis: {},\n    };\n    let twitterGraphOptions = JSON.parse(JSON.stringify(graphOptions));\n    twitterGraphOptions.xaxis.categories = this.state.chartOptions.twitterXaxis;\n\n    let paperGraphOptions = JSON.parse(JSON.stringify(graphOptions));\n    paperGraphOptions.xaxis.categories = this.state.chartOptions.paperXaxis;\n    return (\n      <div>\n        {this.state.isLoding ? (\n          <div className=\"text-center\" style={{ padding: \"20px\" }}>\n            <Loader type=\"Puff\" color=\"#00BFFF\" height={100} width={100} />\n          </div>\n        ) : (\n          <>\n            <div align=\"center\">Twitter Keyword Trends</div>\n            <div id=\"chart\">\n              <Chart\n                type=\"area\"\n                series={this.state.chartOptions.twitterSeries}\n                options={twitterGraphOptions}\n              />\n            </div>\n            <br />\n            <div align=\"center\">Paper Keyword Trends</div>\n            <div id=\"chart\">\n              <Chart\n                type=\"area\"\n                series={this.state.chartOptions.paperSeries}\n                options={paperGraphOptions}\n                height={500}\n              />\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default StreamChart;\n"]},"metadata":{},"sourceType":"module"}